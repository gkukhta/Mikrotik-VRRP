# Настройка VRRP на Mikrotik
- Роутеры `Mikrotik RB450G`.
- RouterOS 7.8
- Эмулятор сети `GNS3`  

Заметил что при включённом параметре VRRP на Mikrotik: `group-authority`(`group-master`),
если отключить свитч `Switch1` или `Switch3`, то все интерфейсы VRRP, объединённые вокруг этого 
`group-master` попадают в состояние `FAIL` на обоих роутерах, из которого никогда не возвращаются.
То есть инструмент нерабочий чуть менее чем полностью.  
Я сделал [скрипт](checkLinkDown.rsc), который проверяет состояние сетевых интерфейсов на коммутаторе.  
Если интерфейс упал, то скрипт понижает приоритет VRRP на всех интерфейсах VRRP на роутере.  
Если интерфейс поднялся, то скрипт повышает приоритет VRRP на всех интерфейсах VRRP на роутере.  
Скрипт вызывается планировщиком из [конфига роутера](config-vrrp.rsc) каждые 2 секунды.  
Прямое соединение между роутерами не требуется, и даже вредно в этом сетапе.  
Пока проблем не выявилось.

![Схема сети](net1.png)  

PC1:
```shell
ip 192.168.88.200/24 192.168.88.1
ip dns 77.88.8.8
ping -t google.com
```